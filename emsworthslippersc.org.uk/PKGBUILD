# Maintainer: Robert Fry <contact@robertfry.xyz>

pkgname=nfc-emsworthslippersc
pkgver=1
pkgrel=1
pkgdesc="Nativefier Collections; www.emsworthslippersc.org.uk"
arch=(x86_64)
url=https://www.emsworthslippersc.org.uk
license=('GPL','custom:2')
makedepends=(nodejs-nativefier)
source=(nfc-emsworthslippersc.desktop
        nfc-emsworthslippersc.png)
sha256sums=(ee79aef0a96bfadb2bd3fff0bc222883e85993dcac0df5ff5bc636fc028dedad
            35670efe1a32aa1b0864a2ebc8f59ae9ee0a479fc9bcd93291708d19dfad6f5c)

_instname=nfc-emsworthslippersc
_execname=NativefierCollections-EmsworthSlipperSC
_builddir=$_execname-linux-x64

build() {
  nativefier "https://www.emsworthslippersc.org.uk" \
    --name $_execname \
    --icon "nfc-emsworthslippersc.png"
}

package() {
  install -d "$pkgdir"/opt
  cp -rL $_builddir "$pkgdir"/opt/$pkgname

  install -d "$pkgdir"/usr/{bin,share/pixmaps}
  ln -sf /opt/$pkgname/$_execname "$pkgdir"/usr/bin/$_instname
  ln -sf /opt/$pkgname/resources/app/icon.png "$pkgdir"/usr/share/pixmaps/$_instname.png

  install -Dm644 $pkgname.desktop "$pkgdir"/usr/share/applications/$_instname.desktop
}
